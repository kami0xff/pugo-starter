{{/* Sidebar for standalone content pages (guidelines, troubleshooting, scenarios, etc.) */}}
<aside class="sidebar" id="sidebar">
  <div class="sidebar-inner">
    <!-- Category Switcher Dropdown -->
    <div class="sidebar-switcher">
      <button class="sidebar-switcher-btn" id="categorySwitcher">
        <span class="switcher-label">
          {{ if eq .Section "safety" }}Safety & Privacy
          {{ else if eq .Section "guidelines" }}Community Guidelines
          {{ else if eq .Section "troubleshooting" }}Troubleshooting
          {{ else if eq .Section "scenarios" }}What To Do If...
          {{ else }}Help Topics{{ end }}
        </span>
        <svg class="switcher-chevron" xmlns="http://www.w3.org/2000/svg" width="16" height="16" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round">
          <path d="m6 9 6 6 6-6"/>
        </svg>
      </button>
      <div class="sidebar-switcher-menu" id="categoryMenu">
        <a href="{{ "users/" | relLangURL }}" class="switcher-option">
          <svg xmlns="http://www.w3.org/2000/svg" width="16" height="16" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round">
            <path d="M16 21v-2a4 4 0 0 0-4-4H6a4 4 0 0 0-4 4v2"></path>
            <circle cx="9" cy="7" r="4"></circle>
          </svg>
          For Users
        </a>
        <a href="{{ "models/" | relLangURL }}" class="switcher-option">
          <svg xmlns="http://www.w3.org/2000/svg" width="16" height="16" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round">
            <path d="m22 8-6 4 6 4V8Z"></path>
            <rect width="14" height="12" x="2" y="6" rx="2" ry="2"></rect>
          </svg>
          For Models
        </a>
        <a href="{{ "studios/" | relLangURL }}" class="switcher-option">
          <svg xmlns="http://www.w3.org/2000/svg" width="16" height="16" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round">
            <path d="M3 9h18v10a2 2 0 0 1-2 2H5a2 2 0 0 1-2-2V9Z"></path>
            <path d="m3 9 2.45-4.9A2 2 0 0 1 7.24 3h9.52a2 2 0 0 1 1.8 1.1L21 9"></path>
            <path d="M12 3v6"></path>
          </svg>
          For Studios
        </a>
        <div class="switcher-divider"></div>
        <a href="{{ "safety/" | relLangURL }}" class="switcher-option {{ if eq .Section "safety" }}active{{ end }}">
          <svg xmlns="http://www.w3.org/2000/svg" width="16" height="16" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round">
            <path d="M12 22s8-4 8-10V5l-8-3-8 3v7c0 6 8 10 8 10z"></path>
          </svg>
          Safety & Privacy
        </a>
        <a href="{{ "guidelines/" | relLangURL }}" class="switcher-option {{ if eq .Section "guidelines" }}active{{ end }}">
          <svg xmlns="http://www.w3.org/2000/svg" width="16" height="16" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round">
            <path d="M12 22c5.523 0 10-4.477 10-10S17.523 2 12 2 2 6.477 2 12s4.477 10 10 10z"/>
            <path d="m9 12 2 2 4-4"/>
          </svg>
          Community Guidelines
        </a>
        <a href="{{ "troubleshooting/" | relLangURL }}" class="switcher-option {{ if eq .Section "troubleshooting" }}active{{ end }}">
          <svg xmlns="http://www.w3.org/2000/svg" width="16" height="16" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round">
            <path d="M14.7 6.3a1 1 0 0 0 0 1.4l1.6 1.6a1 1 0 0 0 1.4 0l3.77-3.77a6 6 0 0 1-7.94 7.94l-6.91 6.91a2.12 2.12 0 0 1-3-3l6.91-6.91a6 6 0 0 1 7.94-7.94l-3.76 3.76z"/>
          </svg>
          Troubleshooting
        </a>
        <a href="{{ "scenarios/" | relLangURL }}" class="switcher-option {{ if eq .Section "scenarios" }}active{{ end }}">
          <svg xmlns="http://www.w3.org/2000/svg" width="16" height="16" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round">
            <circle cx="12" cy="12" r="10"/>
            <path d="M9.09 9a3 3 0 0 1 5.83 1c0 2-3 3-3 3"/>
            <path d="M12 17h.01"/>
          </svg>
          What To Do If...
        </a>
      </div>
    </div>

    <!-- On This Page (placeholder for TOC-like navigation) -->
    <nav class="sidebar-nav">
      <div class="sidebar-group">
        <div class="sidebar-group-toggle" style="cursor: default;" aria-expanded="true">
          <span class="sidebar-group-title">Quick Links</span>
        </div>
        <ul class="sidebar-links">
          <li>
            <a href="{{ "tutorials/" | relLangURL }}" class="sidebar-link">
              <svg xmlns="http://www.w3.org/2000/svg" width="14" height="14" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round" style="margin-right: 0.5rem; flex-shrink: 0;">
                <polygon points="5 3 19 12 5 21 5 3"/>
              </svg>
              Video Tutorials
            </a>
          </li>
          <li>
            <a href="{{ "contact/" | relLangURL }}" class="sidebar-link">
              <svg xmlns="http://www.w3.org/2000/svg" width="14" height="14" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round" style="margin-right: 0.5rem; flex-shrink: 0;">
                <path d="M21 15a2 2 0 0 1-2 2H7l-4 4V5a2 2 0 0 1 2-2h14a2 2 0 0 1 2 2z"/>
              </svg>
              Contact Support
            </a>
          </li>
          <li>
            <a href="/" class="sidebar-link">
              <svg xmlns="http://www.w3.org/2000/svg" width="14" height="14" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round" style="margin-right: 0.5rem; flex-shrink: 0;">
                <path d="m3 9 9-7 9 7v11a2 2 0 0 1-2 2H5a2 2 0 0 1-2-2z"/>
                <polyline points="9 22 9 12 15 12 15 22"/>
              </svg>
              Help Center Home
            </a>
          </li>
        </ul>
      </div>
    </nav>
  </div>
</aside>

<style>
  /* Sidebar link with icon */
  .sidebar-link {
    display: flex;
    align-items: center;
  }
</style>

<script>
document.addEventListener('DOMContentLoaded', function() {
  // Category switcher
  const switcher = document.getElementById('categorySwitcher');
  const switcherParent = switcher?.closest('.sidebar-switcher');
  const menu = document.getElementById('categoryMenu');
  
  if (switcher && switcherParent && menu) {
    switcher.addEventListener('click', (e) => {
      e.stopPropagation();
      
      // Position the dropdown below the button
      const rect = switcher.getBoundingClientRect();
      menu.style.top = (rect.bottom + 8) + 'px';
      menu.style.left = rect.left + 'px';
      menu.style.width = rect.width + 'px';
      
      switcherParent.classList.toggle('open');
    });
    
    document.addEventListener('click', (e) => {
      if (!switcherParent.contains(e.target)) {
        switcherParent.classList.remove('open');
      }
    });
  }
});
</script>
